"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[97596],{11561:(D,u,e)=>{e.d(u,{A:()=>t});function t(D,u){if(!D)throw Error("Invariant failed")}},43371:D=>{D.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},83510:(D,u,e)=>{let t;e.d(u,{SV:()=>MergeView,ex:()=>Da});var r=e(24774),n=e(53839),i=e(97417),o=e(15874),s=e(43720);let Change=class Change{constructor(D,u,e,t){this.fromA=D,this.toA=u,this.fromB=e,this.toB=t}offset(D,u=D){return new Change(this.fromA+D,this.toA+D,this.fromB+u,this.toB+u)}};function l(D,u,e,t,r,n){if(D==t)return[];let i=d(D,u,e,t,r,n),o=m(D,u+i,e,t,r+i,n);u+=i,e-=o,r+=i;let s=e-u,C=(n-=o)-r;if(!s||!C)return[new Change(u,e,r,n)];if(s>C){let i=D.slice(u,e).indexOf(t.slice(r,n));if(i>-1)return[new Change(u,u+i,r,r),new Change(u+i+C,e,n,n)]}else if(C>s){let i=t.slice(r,n).indexOf(D.slice(u,e));if(i>-1)return[new Change(u,u,r,r+i),new Change(e,e,r+i+s,n)]}if(1==s||1==C)return[new Change(u,e,r,n)];let h=function D(u,e,t,r,n,i){let o=t-e,s=i-n;if(o<s){let o=D(r,n,i,u,e,t);return o&&[o[1],o[0],o[2]]}return o<4||2*s<o?null:E(u,e,t,r,n,i,Math.floor(o/4),-1)}(D,u,e,t,r,n);if(h){let[i,o,s]=h;return l(D,u,i,t,r,o).concat(l(D,i+s,e,t,o+s,n))}return function(D,u,e,t,r,n){let i=e-u,o=n-r;if(a<1e9&&Math.min(i,o)>16*a||f>0&&Date.now()>f)return Math.min(i,o)>64*a?[new Change(u,e,r,n)]:g(D,u,e,t,r,n);let s=Math.ceil((i+o)/2);c.reset(s),F.reset(s);let C=(e,n)=>D.charCodeAt(u+e)==t.charCodeAt(r+n),h=(u,r)=>D.charCodeAt(e-u-1)==t.charCodeAt(n-r-1),d=(i-o)%2!=0?F:null,m=d?null:c;for(let E=0;E<s;E++){if(E>a||f>0&&!(63&E)&&Date.now()>f)return g(D,u,e,t,r,n);let B=c.advance(E,i,o,s,d,!1,C)||F.advance(E,i,o,s,m,!0,h);if(B)return function(D,u,e,t,r,n,i,o){let s=!1;return(O(D,t)||++t!=e||(s=!0),O(r,o)||++o!=i||(s=!0),s)?[new Change(u,e,n,i)]:l(D,u,t,r,n,o).concat(l(D,t,e,r,o,i))}(D,u,e,u+B[0],t,r,n,r+B[1])}return[new Change(u,e,r,n)]}(D,u,e,t,r,n)}let a=1e9,f=0,C=!1;let Frontier=class Frontier{constructor(){this.vec=[]}reset(D){this.len=D<<1;for(let D=0;D<this.len;D++)this.vec[D]=-1;this.vec[D+1]=0,this.start=this.end=0}advance(D,u,e,t,r,n,i){for(let o=-D+this.start;o<=D-this.end;o+=2){let s=t+o,l=o==-D||o!=D&&this.vec[s-1]<this.vec[s+1]?this.vec[s+1]:this.vec[s-1]+1,a=l-o;for(;l<u&&a<e&&i(l,a);)l++,a++;if(this.vec[s]=l,l>u)this.end+=2;else if(a>e)this.start+=2;else if(r){let D=t+(u-e)-o;if(D>=0&&D<this.len&&-1!=r.vec[D]){if(n){let e=r.vec[D];if(e>=u-l)return[e,t+e-D]}else if(l>=u-r.vec[D])return[l,a]}}}return null}};let c=new Frontier,F=new Frontier;function h(D,u){let e=1,t=Math.min(D,u);for(;e<t;)e<<=1;return e}function d(D,u,e,t,r,n){if(u==e||u==n||D.charCodeAt(u)!=t.charCodeAt(r))return 0;let i=h(e-u,n-r);for(let o=u,s=r;;){let r=o+i,l=s+i;if(r>e||l>n||D.slice(o,r)!=t.slice(s,l)){if(1==i)return o-u-!O(D,o);i>>=1}else{if(r==e||l==n)return r-u;o=r,s=l}}}function m(D,u,e,t,r,n){if(u==e||r==n||D.charCodeAt(e-1)!=t.charCodeAt(n-1))return 0;let i=h(e-u,n-r);for(let o=e,s=n;;){let n=o-i,l=s-i;if(n<u||l<r||D.slice(n,o)!=t.slice(l,s)){if(1==i)return e-o-!O(D,o);i>>=1}else{if(n==u||l==r)return e-n;o=n,s=l}}}function E(D,u,e,t,r,n,i,o){let s=t.slice(r,n),l=null;for(;;){if(l||i<o)return l;for(let o=u+i;;){!O(D,o)&&o++;let a=o+i;if(O(D,a)||(a+=a==o+1?1:-1),a>=e)break;let f=D.slice(o,a),C=-1;for(;-1!=(C=s.indexOf(f,C+1));){let i=d(D,a,e,t,r+C+f.length,n),s=m(D,u,o,t,r,r+C),c=f.length+i+s;(!l||l[2]<c)&&(l=[o-s,r+C-s,c])}o=a}if(o<0)return l;i>>=1}}function g(D,u,e,t,r,n){let i;C=!0;let o=e-u,s=n-r;if(o<s){let s=E(t,r,n,D,u,e,Math.floor(o/6),50);i=s&&[s[1],s[0],s[2]]}else i=E(D,u,e,t,r,n,Math.floor(s/6),50);if(!i)return[new Change(u,e,r,n)];let[a,f,c]=i;return l(D,u,a,t,r,f).concat(l(D,a+c,e,t,f+c,n))}function B(D,u){for(let e=1;e<D.length;e++){let t=D[e-1],r=D[e];t.toA>r.fromA-u&&t.toB>r.fromB-u&&(D[e-1]=new Change(t.fromA,r.toA,t.fromB,r.toB),D.splice(e--,1))}}try{t=RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(D){}function A(D){return D>48&&D<58||D>64&&D<91||D>96&&D<123}function p(D,u){if(u==D.length)return 0;let e=D.charCodeAt(u);return e<192?+!!A(e):t?M(e)&&u!=D.length-1?2*!!t.test(D.slice(u,u+2)):+!!t.test(String.fromCharCode(e)):0}function v(D,u){if(!u)return 0;let e=D.charCodeAt(u-1);return e<192?+!!A(e):t?L(e)&&1!=u?2*!!t.test(D.slice(u-2,u)):+!!t.test(String.fromCharCode(e)):0}function b(D,u,e){if(u==D.length||!v(D,u))return u;for(let t=u,r=u+e,n=0;n<8;n++){let u=p(D,t);if(!u||t+u>r)return t;t+=u}return u}function w(D,u,e){if(!u||!p(D,u))return u;for(let t=u,r=u-e,n=0;n<8;n++){let u=v(D,t);if(!u||t-u<r)return t;t-=u}return u}function k(D,u,e){for(;u!=e;u--)if(10==D.charCodeAt(u-1))return u;return -1}function x(D,u,e){for(;u!=e;u++)if(10==D.charCodeAt(u))return u;return -1}let M=D=>D>=55296&&D<=56319,L=D=>D>=56320&&D<=57343;function O(D,u){return!u||u==D.length||!M(D.charCodeAt(u-1))||!L(D.charCodeAt(u))}function N(D,u,e){var t;return function(D,u,e){for(let t=0,r=0;r<D.length;r++){let n=D[r],i=n.toA-n.fromA,o=n.toB-n.fromB;if(i&&o||i>3||o>3){let s=r==D.length-1?u.length:D[r+1].fromA,l=n.fromA-t,a=s-n.toA,f=w(u,n.fromA,l),C=b(u,n.toA,a),c=n.fromA-f,F=C-n.toA;if((!i||!o)&&c&&F){let l=Math.max(i,o),[a,h,d]=i?[u,n.fromA,n.toA]:[e,n.fromB,n.toB];l>c&&u.slice(f,n.fromA)==a.slice(d-c,d)?(f=(n=D[r]=new Change(f,f+i,n.fromB-c,n.toB-c)).fromA,C=b(u,n.toA,s-n.toA)):l>F&&u.slice(n.toA,C)==a.slice(h,h+F)&&(C=(n=D[r]=new Change(C-i,C,n.fromB+F,n.toB+F)).toA,f=w(u,n.fromA,n.fromA-t)),c=n.fromA-f,F=C-n.toA}if(c||F)n=D[r]=new Change(n.fromA-c,n.toA+F,n.fromB-c,n.toB+F);else if(i){if(!o){let e=x(u,n.fromA,n.toA),t,i=e<0?-1:k(u,n.toA,n.fromA);e>-1&&(t=e-n.fromA)<=a&&u.slice(n.fromA,e)==u.slice(n.toA,n.toA+t)?n=D[r]=n.offset(t):i>-1&&(t=n.toA-i)<=l&&u.slice(n.fromA-t,n.fromA)==u.slice(i,n.toA)&&(n=D[r]=n.offset(-t))}}else{let u=x(e,n.fromB,n.toB),t,i=u<0?-1:k(e,n.toB,n.fromB);u>-1&&(t=u-n.fromB)<=a&&e.slice(n.fromB,u)==e.slice(n.toB,n.toB+t)?n=D[r]=n.offset(t):i>-1&&(t=n.toB-i)<=l&&e.slice(n.fromB-t,n.fromB)==e.slice(i,n.toB)&&(n=D[r]=n.offset(-t))}}t=n.toA}return B(D,3),D}((a=(null!=(t=null==e?void 0:e.scanLimit)?t:1e9)>>1,f=(null==e?void 0:e.timeout)?Date.now()+e.timeout:0,C=!1,function(D,u,e){for(;;){B(e,1);let t=!1;for(let r=0;r<e.length;r++){let n=e[r],i,o;(i=d(D,n.fromA,n.toA,u,n.fromB,n.toB))&&(n=e[r]=new Change(n.fromA+i,n.toA,n.fromB+i,n.toB)),(o=m(D,n.fromA,n.toA,u,n.fromB,n.toB))&&(n=e[r]=new Change(n.fromA,n.toA-o,n.fromB,n.toB-o));let s=n.toA-n.fromA,l=n.toB-n.fromB;if(s&&l)continue;let a=n.fromA-(r?e[r-1].toA:0),f=(r<e.length-1?e[r+1].fromA:D.length)-n.toA;if(!a||!f)continue;let C=s?D.slice(n.fromA,n.toA):u.slice(n.fromB,n.toB);a<=C.length&&D.slice(n.fromA-a,n.fromA)==C.slice(C.length-a)?(e[r]=new Change(n.fromA-a,n.toA-a,n.fromB-a,n.toB-a),t=!0):f<=C.length&&D.slice(n.toA,n.toA+f)==C.slice(0,f)&&(e[r]=new Change(n.fromA+f,n.toA+f,n.fromB+f,n.toB+f),t=!0)}if(!t)break}return e}(D,u,l(D,0,D.length,u,0,u.length))),D,u)}let S=n.sj.define({combine:D=>D[0]}),T=n.Pe.define(),y=n.sj.define(),R=n.sU.define({create:D=>null,update(D,u){for(let e of u.effects)e.is(T)&&(D=e.value);for(let e of u.state.facet(y))D=e(D,u);return D}});let Chunk=class Chunk{constructor(D,u,e,t,r,n=!0){this.changes=D,this.fromA=u,this.toA=e,this.fromB=t,this.toB=r,this.precise=n}offset(D,u){return D||u?new Chunk(this.changes,this.fromA+D,this.toA+D,this.fromB+u,this.toB+u,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(D,u,e){return Z(N(D.toString(),u.toString(),e),D,u,0,0,!C)}static updateA(D,u,e,t,r){return _(U(D,t,!0,e.length),D,u,e,r)}static updateB(D,u,e,t,r){return _(U(D,t,!1,u.length),D,u,e,r)}};function G(D,u,e,t){let r=e.lineAt(D),n=t.lineAt(u);return r.to==D&&n.to==u&&D<e.length&&u<t.length?[D+1,u+1]:[r.from,n.from]}function V(D,u,e,t){let r=e.lineAt(D),n=t.lineAt(u);return r.from==D&&n.from==u?[D,u]:[r.to+1,n.to+1]}function Z(D,u,e,t,r,n){let i=[];for(let o=0;o<D.length;o++){let s=D[o],[l,a]=G(s.fromA+t,s.fromB+r,u,e),[f,C]=V(s.toA+t,s.toB+r,u,e),c=[s.offset(-l+t,-a+r)];for(;o<D.length-1;){let n=D[o+1],[i,s]=G(n.fromA+t,n.fromB+r,u,e);if(i>f+1&&s>C+1)break;c.push(n.offset(-l+t,-a+r)),[f,C]=V(n.toA+t,n.toB+r,u,e),o++}i.push(new Chunk(c,l,Math.max(l,f),a,Math.max(a,C),n))}return i}function z(D,u,e,t){let r=0,n=D.length;for(;;){if(r==n){let t=0,n=0;r&&({toA:t,toB:n}=D[r-1]);let i=u-(e?t:n);return[t+i,n+i]}let i=r+n>>1,o=D[i],[s,l]=e?[o.fromA,o.toA]:[o.fromB,o.toB];if(s>u)n=i;else{if(!(l<=u))return t?[o.fromA,o.fromB]:[o.toA,o.toB];r=i+1}}}function U(D,u,e,t){let r=[];return u.iterChangedRanges((n,i,o,s)=>{let l=0,a=e?u.length:t,f=0,C=e?t:u.length;n>1e3&&([l,f]=z(D,n-1e3,e,!0)),i<u.length-1e3&&([a,C]=z(D,i+1e3,e,!1));let c=s-o-(i-n),F,[h,d]=e?[c,0]:[0,c];r.length&&(F=r[r.length-1]).toA>=l?r[r.length-1]={fromA:F.fromA,fromB:F.fromB,toA:a,toB:C,diffA:F.diffA+h,diffB:F.diffB+d}:r.push({fromA:l,toA:a,fromB:f,toB:C,diffA:h,diffB:d})}),r}function _(D,u,e,t,r){if(!D.length)return u;let n=[];for(let i=0,o=0,s=0,l=0;;i++){let a=i==D.length?null:D[i],f=a?a.fromA+o:e.length,c=a?a.fromB+s:t.length;for(;l<u.length;){let D=u[l];if(D.toA+o>f||D.toB+s>c)break;n.push(D.offset(o,s)),l++}if(!a)break;let F=a.toA+o+a.diffA,h=a.toB+s+a.diffB;for(let D of Z(N(e.sliceString(f,F),t.sliceString(c,h),r),e,t,f,c,!C))n.push(D);for(o+=a.diffA,s+=a.diffB;l<u.length;){let D=u[l];if(D.fromA+o>F&&D.fromB+s>h)break;l++}}return n}let H={scanLimit:500},I=r.Z9.fromClass(class{constructor(D){({deco:this.deco,gutter:this.gutter}=$(D))}update(D){var u,e,t,r;(D.docChanged||D.viewportChanged||(u=D.startState,e=D.state,u.field(R,!1)!=e.field(R,!1))||(t=D.startState,r=D.state,t.facet(S)!=r.facet(S)))&&({deco:this.deco,gutter:this.gutter}=$(D.view))}},{decorations:D=>D.deco}),P=n.Nb.low((0,r.cU)({class:"cm-changeGutter",markers:D=>{var u;return(null==(u=D.plugin(I))?void 0:u.gutter)||n.om.empty}})),W=r.NZ.line({class:"cm-changedLine"}),j=r.NZ.mark({class:"cm-changedText"}),q=r.NZ.mark({tagName:"ins",class:"cm-insertedLine"}),Y=r.NZ.mark({tagName:"del",class:"cm-deletedLine"}),J=new class extends r.wJ{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function $(D){let u=D.state.field(R),{side:e,highlightChanges:t,markGutter:r,overrideChunk:i}=D.state.facet(S),o="a"==e,s=new n.vB,l=r?new n.vB:null,{from:a,to:f}=D.viewport;for(let e of u){if((o?e.fromA:e.fromB)>=f)break;!((o?e.toA:e.toB)>a)||i&&i(D.state,e,s,l)||function(D,u,e,t,r,n){let i=e?D.fromA:D.fromB,o=e?D.toA:D.toB,s=0;if(i!=o){r.add(i,i,W),r.add(i,o,e?Y:q),n&&n.add(i,i,J);for(let l=u.iterRange(i,o-1),a=i;!l.next().done;){if(l.lineBreak){a++,r.add(a,a,W),n&&n.add(a,a,J);continue}let u=a+l.value.length;if(t)for(;s<D.changes.length;){let t=D.changes[s],n=i+(e?t.fromA:t.fromB),o=i+(e?t.toA:t.toB),l=Math.max(a,n),f=Math.min(u,o);if(l<f&&r.add(l,f,j),o<u)s++;else break}a=u}}}(e,D.state.doc,o,t,s,l)}return{deco:s.finish(),gutter:l&&l.finish()}}let Spacer=class Spacer extends r.xO{constructor(D){super(),this.height=D}eq(D){return this.height==D.height}toDOM(){let D=document.createElement("div");return D.className="cm-mergeSpacer",D.style.height=this.height+"px",D}updateDOM(D){return D.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};let K=n.Pe.define({map:(D,u)=>D.map(u)}),Q=n.sU.define({create:()=>r.NZ.none,update:(D,u)=>{for(let D of u.effects)if(D.is(K))return D.value;return D.map(u.changes)},provide:D=>r.Lz.decorations.from(D)});function X(D,u){if(D.size!=u.size)return!1;let e=D.iter(),t=u.iter();for(;e.value;){if(e.from!=t.from||Math.abs(e.value.spec.widget.height-t.value.spec.widget.height)>1)return!1;e.next(),t.next()}return!0}let DD=n.Pe.define({map:(D,u)=>u.mapPos(D)});let CollapseWidget=class CollapseWidget extends r.xO{constructor(D){super(),this.lines=D}eq(D){return this.lines==D.lines}toDOM(D){let u=document.createElement("div");return u.className="cm-collapsedLines",u.textContent=D.state.phrase("$ unchanged lines",this.lines),u.addEventListener("click",u=>{let e=D.posAtDOM(u.target);D.dispatch({effects:DD.of(e)});let{side:t,sibling:r}=D.state.facet(S);r&&r().dispatch({effects:DD.of(function(D,u,e){let t=0,r=0;for(let n=0;;n++){let i=n<u.length?u[n]:null;if(!i||(e?i.fromA:i.fromB)>=D)return r+(D-t);[t,r]=e?[i.toA,i.toB]:[i.toB,i.toA]}}(e,D.state.field(R),"a"==t))})}),u}ignoreEvent(D){return D instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}};let Du=n.sU.define({create:D=>r.NZ.none,update(D,u){for(let e of(D=D.map(u.changes),u.effects))e.is(DD)&&(D=D.update({filter:D=>D!=e.value}));return D},provide:D=>r.Lz.decorations.from(D)});function De({margin:D=3,minSize:u=4}){return Du.init(e=>(function(D,u,e){let t=new n.vB,i="a"==D.facet(S).side,o=D.field(R),s=1;for(let n=0;;n++){let l=n<o.length?o[n]:null,a=n?s+u:1,f=l?D.doc.lineAt(i?l.fromA:l.fromB).number-1-u:D.doc.lines,C=f-a+1;if(C>=e&&t.add(D.doc.line(a).from,D.doc.line(f).to,r.NZ.replace({widget:new CollapseWidget(C),block:!0})),!l)break;s=D.doc.lineAt(Math.min(D.doc.length,i?l.toA:l.toB)).number}return t.finish()})(e,D,u))}let Dt=r.Lz.styleModule.of(new i.G({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),Dr=r.Lz.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'"\u299A"',marginInlineEnd:"7px"},"&:after":{content:'"\u299A"',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),Dn=new n.xx,Di=new n.xx;let MergeView=class MergeView{constructor(D){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=D.diffConfig||H;let u=[n.Nb.low(I),Dr,Dt,Q,r.Lz.updateListener.of(D=>{this.measuring<0&&(D.heightChanged||D.viewportChanged)&&!D.transactions.some(D=>D.effects.some(D=>D.is(K)))&&this.measure()})],e=[S.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==D.highlightChanges,markGutter:!1!==D.gutter})];!1!==D.gutter&&e.push(P);let t=n.$t.create({doc:D.a.doc,selection:D.a.selection,extensions:[D.a.extensions||[],r.Lz.editorAttributes.of({class:"cm-merge-a"}),Di.of(e),u]}),i=[S.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==D.highlightChanges,markGutter:!1!==D.gutter})];!1!==D.gutter&&i.push(P);let o=n.$t.create({doc:D.b.doc,selection:D.b.selection,extensions:[D.b.extensions||[],r.Lz.editorAttributes.of({class:"cm-merge-b"}),Di.of(i),u]});this.chunks=Chunk.build(t.doc,o.doc,this.diffConf);let s=[R.init(()=>this.chunks),Dn.of(D.collapseUnchanged?De(D.collapseUnchanged):[])];t=t.update({effects:n.Pe.appendConfig.of(s)}).state,o=o.update({effects:n.Pe.appendConfig.of(s)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let l=D.orientation||"a-b",a=document.createElement("div");a.className="cm-mergeViewEditor";let f=document.createElement("div");f.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==l?a:f),this.editorDOM.appendChild("a-b"==l?f:a),this.a=new r.Lz({state:t,parent:a,root:D.root,dispatchTransactions:D=>this.dispatch(D,this.a)}),this.b=new r.Lz({state:o,parent:f,root:D.root,dispatchTransactions:D=>this.dispatch(D,this.b)}),this.setupRevertControls(!!D.revertControls,"b-to-a"==D.revertControls,D.renderRevertControl),D.parent&&D.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(D,u){if(D.some(D=>D.docChanged)){let e=D[D.length-1],t=D.reduce((D,u)=>D.compose(u.changes),n.VR.empty(D[0].startState.doc.length));this.chunks=u==this.a?Chunk.updateA(this.chunks,e.newDoc,this.b.state.doc,t,this.diffConf):Chunk.updateB(this.chunks,this.a.state.doc,e.newDoc,t,this.diffConf),u.update([...D,e.state.update({effects:T.of(this.chunks)})]);let r=u==this.a?this.b:this.a;r.update([r.state.update({effects:T.of(this.chunks)})]),this.scheduleMeasure()}else u.update(D)}reconfigure(D){if("diffConfig"in D&&(this.diffConf=D.diffConfig),"orientation"in D){let u="b-a"!=D.orientation;if(u!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let D=this.a.dom.parentNode,e=this.b.dom.parentNode;D.remove(),e.remove(),this.editorDOM.insertBefore(u?D:e,this.editorDOM.firstChild),this.editorDOM.appendChild(u?e:D),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in D||"renderRevertControl"in D){let u=!!this.revertDOM,e=this.revertToA,t=this.renderRevert;"revertControls"in D&&(u=!!D.revertControls,e="b-to-a"==D.revertControls),"renderRevertControl"in D&&(t=D.renderRevertControl),this.setupRevertControls(u,e,t)}let u="highlightChanges"in D,e="gutter"in D,t="collapseUnchanged"in D;if(u||e||t){let r=[],n=[];if(u||e){let t=this.a.state.facet(S),i=e?!1!==D.gutter:t.markGutter,o=u?!1!==D.highlightChanges:t.highlightChanges;r.push(Di.reconfigure([S.of({side:"a",sibling:()=>this.b,highlightChanges:o,markGutter:i}),i?P:[]])),n.push(Di.reconfigure([S.of({side:"b",sibling:()=>this.a,highlightChanges:o,markGutter:i}),i?P:[]]))}if(t){let u=Dn.reconfigure(D.collapseUnchanged?De(D.collapseUnchanged):[]);r.push(u),n.push(u)}this.a.dispatch({effects:r}),this.b.dispatch({effects:n})}this.scheduleMeasure()}setupRevertControls(D,u,e){this.revertToA=u,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=e,!D&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):D&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",D=>this.revertClicked(D)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let D=this.dom.ownerDocument.defaultView||window;this.measuring=D.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){!function(D,u,e){let t=new n.vB,i=new n.vB,o=D.state.field(Q).iter(),s=u.state.field(Q).iter(),l=0,a=0,f=0,C=0,c=D.viewport,F=u.viewport;for(let n=0;;n++){let h=n<e.length?e[n]:null,d=h?h.fromA:D.state.doc.length,m=h?h.fromB:u.state.doc.length;if(l<d){let e=D.lineBlockAt(l).top+f-(u.lineBlockAt(a).top+C);e<-.01?(f-=e,t.add(l,l,r.NZ.widget({widget:new Spacer(-e),block:!0,side:-1}))):e>.01&&(C+=e,i.add(a,a,r.NZ.widget({widget:new Spacer(e),block:!0,side:-1})))}if(d>l+1e3&&l<c.from&&d>c.from&&a<F.from&&m>F.from){let D=Math.min(c.from-l,F.from-a);l+=D,a+=D,n--}else if(h)l=h.toA,a=h.toB;else break;for(;o.value&&o.from<l;)f-=o.value.spec.widget.height,o.next();for(;s.value&&s.from<a;)C-=s.value.spec.widget.height,s.next()}for(;o.value;)f-=o.value.spec.widget.height,o.next();for(;s.value;)C-=s.value.spec.widget.height,s.next();let h=D.contentHeight+f-(u.contentHeight+C);h<.01?t.add(D.state.doc.length,D.state.doc.length,r.NZ.widget({widget:new Spacer(-h),block:!0,side:1})):h>.01&&i.add(u.state.doc.length,u.state.doc.length,r.NZ.widget({widget:new Spacer(h),block:!0,side:1}));let d=t.finish(),m=i.finish();X(d,D.state.field(Q))||D.dispatch({effects:K.of(d)}),X(m,u.state.field(Q))||u.dispatch({effects:K.of(m)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let D=this.revertDOM,u=D.firstChild,e=this.a.viewport,t=this.b.viewport;for(let r=0;r<this.chunks.length;r++){let n=this.chunks[r];if(n.fromA>e.to||n.fromB>t.to)break;if(n.fromA<e.from||n.fromB<t.from)continue;let i=this.a.lineBlockAt(n.fromA).top+"px";for(;u&&+u.dataset.chunk<r;)u=Do(u);u&&u.dataset.chunk==String(r)?(u.style.top!=i&&(u.style.top=i),u=u.nextSibling):D.insertBefore(this.renderRevertButton(i,r),u)}for(;u;)u=Do(u)}renderRevertButton(D,u){let e;if(this.renderRevert)e=this.renderRevert();else{e=document.createElement("button");let D=this.a.state.phrase("Revert this chunk");e.setAttribute("aria-label",D),e.setAttribute("title",D),e.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return e.style.top=D,e.setAttribute("data-chunk",String(u)),e}revertClicked(D){let u=D.target,e;for(;u&&u.parentNode!=this.revertDOM;)u=u.parentNode;if(u&&(e=this.chunks[u.dataset.chunk])){let[u,t,r,n,i,o]=this.revertToA?[this.b,this.a,e.fromB,e.toB,e.fromA,e.toA]:[this.a,this.b,e.fromA,e.toA,e.fromB,e.toB],s=u.state.sliceDoc(r,Math.max(r,n-1));r!=n&&o<=t.state.doc.length&&(s+=u.state.lineBreak),t.dispatch({changes:{from:i,to:Math.min(t.state.doc.length,o),insert:s},userEvent:"revert"}),D.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}};function Do(D){let u=D.nextSibling;return D.remove(),u}let Ds=new class extends r.wJ{constructor(){super(...arguments),this.elementClass="cm-deletedLineGutter"}},Dl=n.Nb.low((0,r.cU)({class:"cm-changeGutter",markers:D=>{var u;return(null==(u=D.plugin(I))?void 0:u.gutter)||n.om.empty},widgetMarker:(D,u)=>u instanceof DeletionWidget?Ds:null}));function Da(D){let u="string"==typeof D.original?n.EY.of(D.original.split(/\r?\n/)):D.original,e=D.diffConfig||H;return[n.Nb.low(I),Dh,Dr,r.Lz.editorAttributes.of({class:"cm-merge-b"}),y.of((D,u)=>{let t=u.effects.find(D=>D.is(Df));return t&&(D=Chunk.updateA(D,t.value.doc,u.startState.doc,t.value.changes,e)),u.docChanged&&(D=Chunk.updateB(D,u.state.field(DC),u.newDoc,u.changes,e)),D}),S.of({highlightChanges:!1!==D.highlightChanges,markGutter:!1!==D.gutter,syntaxHighlightDeletions:!1!==D.syntaxHighlightDeletions,syntaxHighlightDeletionsMaxLength:3e3,mergeControls:!1!==D.mergeControls,overrideChunk:D.allowInlineDiffs?DB:void 0,side:"b"}),DC.init(()=>u),!1!==D.gutter?Dl:[],D.collapseUnchanged?De(D.collapseUnchanged):[],R.init(D=>Chunk.build(u,D.doc,e))]}let Df=n.Pe.define(),DC=n.sU.define({create:()=>n.EY.empty,update(D,u){for(let e of u.effects)e.is(Df)&&(D=e.value.doc);return D}}),Dc=new WeakMap;let DeletionWidget=class DeletionWidget extends r.xO{constructor(D){super(),this.buildDOM=D,this.dom=null}eq(D){return this.dom==D.dom}toDOM(D){return this.dom||(this.dom=this.buildDOM(D))}};function DF(D){let u=new n.vB;for(let e of D.field(R)){let t=D.facet(S).overrideChunk&&Dm(D,e);u.add(e.fromB,e.fromB,function(D,u,e){let t=Dc.get(u.changes);if(t)return t;let i=r.NZ.widget({block:!0,side:-1,widget:new DeletionWidget(t=>{let{highlightChanges:r,syntaxHighlightDeletions:i,syntaxHighlightDeletionsMaxLength:l,mergeControls:a}=D.facet(S),f=document.createElement("div");if(f.className="cm-deletedChunk",a){let u=f.appendChild(document.createElement("div"));u.className="cm-chunkButtons";let e=u.appendChild(document.createElement("button"));e.name="accept",e.textContent=D.phrase("Accept"),e.onmousedown=D=>{D.preventDefault(),function(D,u){let{state:e}=D,t=null!=u?u:e.selection.main.head,r=D.state.field(R).find(D=>D.fromB<=t&&D.endB>=t);if(!r)return;let i=D.state.sliceDoc(r.fromB,Math.max(r.fromB,r.toB-1)),o=D.state.field(DC);r.fromB!=r.toB&&r.toA<=o.length&&(i+=D.state.lineBreak);let s=n.VR.of({from:r.fromA,to:Math.min(o.length,r.toA),insert:i},o.length);D.dispatch({effects:Df.of({doc:s.apply(o),changes:s}),userEvent:"accept"})}(t,t.posAtDOM(f))};let r=u.appendChild(document.createElement("button"));r.name="reject",r.textContent=D.phrase("Reject"),r.onmousedown=D=>{D.preventDefault(),function(D,u){let{state:e}=D,t=null!=u?u:e.selection.main.head,r=e.field(R).find(D=>D.fromB<=t&&D.endB>=t);if(!r)return;let n=e.field(DC).sliceString(r.fromA,Math.max(r.fromA,r.toA-1));r.fromA!=r.toA&&r.toB<=e.doc.length&&(n+=e.lineBreak),D.dispatch({changes:{from:r.fromB,to:Math.min(e.doc.length,r.toB),insert:n},userEvent:"revert"})}(t,t.posAtDOM(f))}}if(e||u.fromA>=u.toA)return f;let C=t.state.field(DC).sliceString(u.fromA,u.endA),c=i&&D.facet(o.BH),F=E(),h=u.changes,d=0,m=!1;function E(){let D=f.appendChild(document.createElement("div"));return D.className="cm-deletedLine",D.appendChild(document.createElement("del"))}function g(D,u,e){for(let t=D;t<u;){if(`
`==C.charAt(t)){F.firstChild||F.appendChild(document.createElement("br")),F=E(),t++;continue}let D=u,n=e+(m?" cm-deletedText":""),i=!1,o=C.indexOf(`
`,t);if(o>-1&&o<u&&(D=o),r&&d<h.length){let u=Math.max(0,m?h[d].toA:h[d].fromA);u<=D&&(D=u,m&&d++,i=!0)}if(D>t){let u=document.createTextNode(C.slice(t,D));if(n){let D=F.appendChild(document.createElement("span"));D.className=n,D.appendChild(u)}else F.appendChild(u);t=D}i&&(m=!m)}}if(c&&u.toA-u.fromA<=l){let u=c.parser.parse(C),e=0;(0,s.DM)(u,{style:u=>(0,o.GY)(D,u)},(D,u,t)=>{D>e&&g(e,D,""),g(D,u,t),e=u}),g(e,C.length,"")}else g(0,C.length,"");return F.firstChild||F.appendChild(document.createElement("br")),f})});return Dc.set(u.changes,i),i}(D,e,!!t))}return u.finish()}let Dh=n.sU.define({create:D=>DF(D),update:(D,u)=>u.state.field(R,!1)!=u.startState.field(R,!1)?DF(u.state):D,provide:D=>r.Lz.decorations.from(D)}),Dd=new WeakMap;function Dm(D,u){let e=Dd.get(u);if(void 0!==e)return e;e=null;let t=D.field(DC),n=D.doc,i=t.lineAt(u.endA).number-t.lineAt(u.fromA).number+1,o=n.lineAt(u.endB).number-n.lineAt(u.fromB).number+1;D:if(i==o&&i<10){let D=[],n=0,o=u.fromA,s=u.fromB;for(let e of u.changes){if(e.fromA<e.toA){n+=e.toA-e.fromA;let u=t.sliceString(o+e.fromA,o+e.toA);if(/\n/.test(u))break D;D.push(r.NZ.widget({widget:new InlineDeletion(u),side:-1}).range(s+e.fromB))}e.fromB<e.toB&&D.push(j.range(s+e.fromB,s+e.toB))}n<u.endA-u.fromA-2*i&&(e=D)}return Dd.set(u,e),e}let InlineDeletion=class InlineDeletion extends r.xO{constructor(D){super(),this.text=D}eq(D){return this.text==D.text}toDOM(D){let u=document.createElement("del");return u.className="cm-deletedText",u.textContent=this.text,u}};let DE=new class extends r.wJ{constructor(){super(...arguments),this.elementClass="cm-inlineChangedLineGutter"}},Dg=r.NZ.line({class:"cm-inlineChangedLine"});function DB(D,u,e,t){let r=Dm(D,u),n=0;if(!r)return!1;for(let i=D.doc.lineAt(u.fromB);;){for(t&&t.add(i.from,i.from,DE),e.add(i.from,i.from,Dg);n<r.length&&r[n].to<=i.to;){let D=r[n++];e.add(D.from,D.to,D.value)}if(i.to>=u.endB)break;i=D.doc.lineAt(i.to+1)}return!0}}}]);
//# sourceMappingURL=97596-4cf9d86dd225.js.map